= 
:allow-uri-read: 


ロールを作成し、コンソール エージェント VM インスタンスに使用するサービス アカウントに適用します。

.手順
. Google Cloud でカスタムロールを作成します。
+
.. 定義された権限を含むYAMLファイルを作成します。link:reference-permissions-gcp.html["Google Cloud のコンソール エージェント ポリシー"] 。
.. Google Cloud から Cloud Shell を有効にします。
.. コンソール エージェントに必要な権限を含む YAML ファイルをアップロードします。
.. カスタムロールを作成するには、 `gcloud iam roles create`指示。
+
次の例では、プロジェクト レベルで「connector」という名前のロールを作成します。

+
[source, gcloud]
----
gcloud iam roles create connector --project=myproject --file=connector.yaml
----
+
https://cloud.google.com/iam/docs/creating-custom-roles#iam-custom-roles-create-gcloud["Google Cloud ドキュメント: カスタムロールの作成と管理"^]



. Google Cloud でサービス アカウントを作成します。
+
.. IAM & Admin サービスから、*サービス アカウント > サービス アカウントの作成* を選択します。
.. サービス アカウントの詳細を入力し、[作成して続行] を選択します。
.. 作成したロールを選択します。
.. 残りの手順を完了してロールを作成します。
+
https://cloud.google.com/iam/docs/creating-managing-service-accounts#creating_a_service_account["Google Cloud ドキュメント: サービス アカウントの作成"^]





.結果
これで、コンソール エージェント VM インスタンスに割り当てることができるサービス アカウントが作成されました。
