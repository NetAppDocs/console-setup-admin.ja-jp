---
sidebar: sidebar 
permalink: task-install-agent-on-prem-ova.html 
keywords: install agent, on prem agent installation, on prem connector, vmware, OVA, manual install 
summary: VMWare ユーザーの場合は、OVA を使用して VCenter にコンソール エージェントをインストールできます。  OVA のダウンロードまたは URL は、 NetAppコンソールから入手できます。 
---
= VCenter を使用してオンプレミスにコンソール エージェントをインストールする
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
VMWare ユーザーの場合は、OVA を使用して VCenter にコンソール エージェントをインストールできます。  OVA のダウンロードまたは URL は、 NetAppコンソールから入手できます。


NOTE: VCenter ツールと共にコンソール エージェントをインストールすると、VM Web コンソールを使用してメンテナンス タスクを実行できます。link:task-agent-vm-config.html["エージェントの VM コンソールの詳細について説明します。"]



== コンソールエージェントのインストールの準備

インストールする前に、VM ホストが要件を満たしており、コンソール エージェントがインターネットおよび対象のネットワークにアクセスできることを確認してください。  NetAppデータ サービスまたはCloud Volumes ONTAP を使用するには、コンソール エージェントがユーザーに代わってアクションを実行できるように、クラウド プロバイダの資格情報を作成します。



=== コンソールエージェントホストの要件を確認する

コンソール エージェントをインストールする前に、ホスト マシンがインストール要件を満たしていることを確認してください。

* CPU: 8コアまたは8vCPU
* メモリ: 32 GB
* ディスク容量: 165 GB (シックプロビジョニング)
* vSphere 7.0以降
* ESXi ホスト 7.03 以上



NOTE: エージェントを ESXi ホストに直接インストールするのではなく、vCenter 環境にインストールします。



=== コンソールエージェントのネットワークアクセスを設定する

ネットワーク管理者と協力して、コンソール エージェントが必要なエンドポイントへの送信アクセスと対象ネットワークへの接続を持っていることを確認します。

ターゲットネットワークへの接続:: コンソール エージェントには、システムを作成および管理する予定の場所へのネットワーク接続が必要です。たとえば、オンプレミス環境にCloud Volumes ONTAPシステムまたはストレージ システムを作成する予定のネットワークなどです。


アウトバウンドインターネットアクセス:: コンソール エージェントを展開するネットワークの場所には、特定のエンドポイントに接続するための送信インターネット接続が必要です。


WebベースのNetAppコンソールを使用する際にコンピュータから接続されるエンドポイント::
+
--
Web ブラウザからコンソールにアクセスするコンピュータは、複数のエンドポイントに接続できる必要があります。コンソール エージェントを設定し、コンソールを日常的に使用するには、コンソールを使用する必要があります。

link:reference-networking-saas-console.html["NetAppコンソールのネットワークを準備する"] 。

--


コンソールエージェントから接続されたエンドポイント:: コンソール エージェントは、日常業務でパブリック クラウド環境内のリソースとプロセスを管理するために、次のエンドポイントに接続するために、送信インターネット アクセスを必要とします。
+
--
以下にリストされているエンドポイントはすべて CNAME エントリです。

--



NOTE: オンプレミスにコンソール エージェントがインストールされている場合、Google Cloud のリソースを管理することはできません。  Google Cloud リソースを管理するには、Google Cloud にエージェントをインストールします。

[role="tabbed-block"]
====
.AWS
--
コンソール エージェントをオンプレミスでインストールする場合、AWS に導入されたNetAppシステム ( Cloud Volumes ONTAPなど) を管理するために、次の AWS エンドポイントへのネットワーク アクセスが必要です。

コンソールエージェントから接続されたエンドポイント:: コンソール エージェントは、日常業務でパブリック クラウド環境内のリソースとプロセスを管理するために、次のエンドポイントに接続するために、送信インターネット アクセスを必要とします。
+
--
以下にリストされているエンドポイントはすべて CNAME エントリです。

[cols="2a,1a"]
|===
| エンドポイント | 目的 


 a| 
AWS サービス (amazonaws.com):

* クラウドフォーメーション
* エラスティックコンピューティングクラウド (EC2)
* アイデンティティとアクセス管理（IAM）
* キー管理サービス (KMS)
* セキュリティトークンサービス（STS）
* シンプルストレージサービス（S3）

 a| 
AWS リソースを管理します。エンドポイントは AWS リージョンによって異なります。 https://docs.aws.amazon.com/general/latest/gr/rande.html["詳細についてはAWSドキュメントを参照してください"^]



 a| 
\https://mysupport.netapp.com
 a| 
ライセンス情報を取得し、 AutoSupportメッセージをNetAppサポートに送信します。



 a| 
\https://signin.b2c.netapp.com
 a| 
NetAppサポート サイト (NSS) の資格情報を更新するか、 NetAppコンソールに新しい NSS 資格情報を追加します。



 a| 
\https://api.bluexp.netapp.com \https://netapp-cloud-account.auth0.com \https://netapp-cloud-account.us.auth0.com \https://console.netapp.com \https://components.console.bluexp.netapp.com \https://cdn.auth0.com
 a| 
NetAppコンソール内で機能とサービスを提供します。



 a| 
\https://bluexpinfraprod.eastus2.data.azurecr.io \https://bluexpinfraprod.azurecr.io
 a| 
コンソール エージェントのアップグレード用のイメージを取得します。

* 新しいエージェントを展開すると、検証チェックによって現在のエンドポイントへの接続がテストされます。使用する場合link:link:reference-networking-saas-console-previous.html["以前のエンドポイント"]、検証チェックは失敗します。この失敗を回避するには、検証チェックをスキップします。
+
以前のエンドポイントも引き続きサポートされますが、 NetApp、ファイアウォール ルールをできるだけ早く現在のエンドポイントに更新することをお勧めします。link:reference-networking-saas-console-previous.html#update-endpoint-list["エンドポイントリストを更新する方法を学ぶ"] 。

* ファイアウォールの現在のエンドポイントに更新すると、既存のエージェントは引き続き動作します。


|===
--


--
.Azure
--
コンソール エージェントがオンプレミスにインストールされている場合、Azure にデプロイされたNetAppシステム ( Cloud Volumes ONTAPなど) を管理するために、次の Azure エンドポイントへのネットワーク アクセスが必要です。

[cols="2a,1a"]
|===
| エンドポイント | 目的 


 a| 
\https://management.azure.com \https://login.microsoftonline.com \https://blob.core.windows.net \https://core.windows.net
 a| 
Azure パブリック リージョン内のリソースを管理します。



 a| 
\https://management.chinacloudapi.cn \https://login.chinacloudapi.cn \https://blob.core.chinacloudapi.cn \https://core.chinacloudapi.cn
 a| 
Azure China リージョンのリソースを管理します。



 a| 
\https://mysupport.netapp.com
 a| 
ライセンス情報を取得し、 AutoSupportメッセージをNetAppサポートに送信します。



 a| 
\https://signin.b2c.netapp.com
 a| 
NetAppサポート サイト (NSS) の資格情報を更新するか、 NetAppコンソールに新しい NSS 資格情報を追加します。



 a| 
\https://api.bluexp.netapp.com \https://netapp-cloud-account.auth0.com \https://netapp-cloud-account.us.auth0.com \https://console.netapp.com \https://components.console.bluexp.netapp.com \https://cdn.auth0.com
 a| 
NetAppコンソール内で機能とサービスを提供します。



 a| 
\https://bluexpinfraprod.eastus2.data.azurecr.io \https://bluexpinfraprod.azurecr.io
 a| 
コンソール エージェントのアップグレード用のイメージを取得します。

* 新しいエージェントを展開すると、検証チェックによって現在のエンドポイントへの接続がテストされます。使用する場合link:link:reference-networking-saas-console-previous.html["以前のエンドポイント"]、検証チェックは失敗します。この失敗を回避するには、検証チェックをスキップします。
+
以前のエンドポイントも引き続きサポートされますが、 NetApp、ファイアウォール ルールをできるだけ早く現在のエンドポイントに更新することをお勧めします。link:reference-networking-saas-console-previous.html#update-endpoint-list["エンドポイントリストを更新する方法を学ぶ"] 。

* ファイアウォールの現在のエンドポイントに更新すると、既存のエージェントは引き続き動作します。


|===
--
====
プロキシ サーバ:: NetApp は明示的プロキシ構成と透過的プロキシ構成の両方をサポートしています。透過プロキシを使用している場合は、プロキシ サーバーの証明書のみを提供する必要があります。明示的なプロキシを使用している場合は、IP アドレスと資格情報も必要になります。
+
--
* IPアドレス
* Credentials
* HTTPS証明書


--


ポート:: ユーザーが開始した場合、またはCloud Volumes ONTAPからNetAppサポートにAutoSupportメッセージを送信するためのプロキシとして使用された場合を除いて、コンソール エージェントへの着信トラフィックはありません。
+
--
* HTTP (80) と HTTPS (443) は、まれに使用するローカル UI へのアクセスを提供します。
* SSH（22）は、トラブルシューティングのためにホストに接続する必要がある場合にのみ必要です。
* アウトバウンド インターネット接続が利用できないサブネットにCloud Volumes ONTAPシステムを展開する場合は、ポート 3128 経由のインバウンド接続が必要です。
+
Cloud Volumes ONTAPシステムにAutoSupportメッセージを送信するためのアウトバウンド インターネット接続がない場合、コンソールは、コンソール エージェントに含まれているプロキシ サーバーを使用するようにそれらのシステムを自動的に構成します。唯一の要件は、コンソール エージェントのセキュリティ グループがポート 3128 経由の受信接続を許可していることを確認することです。コンソール エージェントを展開した後、このポートを開く必要があります。



--


NTP を有効にする:: NetApp Data Classification を使用して企業のデータ ソースをスキャンする予定の場合は、システム間で時刻が同期されるように、コンソール エージェントとNetApp Data Classification システムの両方で Network Time Protocol (NTP) サービスを有効にする必要があります。 https://docs.netapp.com/us-en/bluexp-classification/concept-cloud-compliance.html["NetAppデータ分類の詳細"^]




=== AWS または Azure のコンソール エージェント クラウド権限を作成する

オンプレミスのコンソールエージェントを使用して AWS または Azure のNetAppデータ サービスを使用する場合は、インストール後にコンソールエージェントに資格情報を追加できるように、クラウド プロバイダーで権限を設定する必要があります。


NOTE: オンプレミスにコンソール エージェントがインストールされている場合、Google Cloud のリソースを管理することはできません。  Google Cloud リソースを管理するには、Google Cloud にエージェントをインストールする必要があります。

[role="tabbed-block"]
====
.AWS
--
オンプレミスのコンソールエージェントの場合は、IAM ユーザーアクセスキーを追加して AWS 権限を付与します。

オンプレミスのコンソール エージェントには IAM ユーザー アクセス キーを使用します。オンプレミスのコンソール エージェントでは IAM ロールはサポートされていません。

.手順
. AWS コンソールにログインし、IAM サービスに移動します。
. ポリシーを作成します。
+
.. *ポリシー > ポリシーの作成*を選択します。
.. *JSON*を選択し、その内容をコピーして貼り付けます。link:reference-permissions-aws.html["コンソールエージェントのIAMポリシー"] 。
.. 残りの手順を完了してポリシーを作成します。
+
使用する予定のNetAppデータ サービスによっては、2 番目のポリシーを作成する必要がある場合があります。

+
標準リージョンの場合、権限は 2 つのポリシーに分散されます。 AWS の管理ポリシーの最大文字サイズ制限により、2 つのポリシーが必要になります。link:reference-permissions-aws.html["コンソールエージェントのIAMポリシーの詳細"] 。



. IAM ユーザーにポリシーをアタッチします。
+
** https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html["AWSドキュメント: IAMロールの作成"^]
** https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_manage-attach-detach.html["AWSドキュメント: IAMポリシーの追加と削除"^]


. コンソール エージェントをインストールした後、 NetAppコンソールに追加できるアクセス キーがユーザーにあることを確認します。


.結果
これで、必要な権限を持つ IAM ユーザー アクセス キーを取得できるはずです。コンソール エージェントをインストールした後、コンソールからこれらの認証情報をコンソール エージェントに関連付けます。

--
.Azure
--
コンソール エージェントがオンプレミスでインストールされている場合は、Microsoft Entra ID でサービス プリンシパルを設定し、コンソール エージェントに必要な Azure 資格情報を取得して、コンソール エージェントに Azure 権限を付与する必要があります。

.ロールベースのアクセス制御用の Microsoft Entra アプリケーションを作成する
. Azure で Active Directory アプリケーションを作成し、そのアプリケーションをロールに割り当てるためのアクセス許可があることを確認します。
+
詳細については、 https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal#required-permissions/["Microsoft Azure ドキュメント: 必要な権限"^]

. Azure ポータルから、*Microsoft Entra ID* サービスを開きます。
+
image:screenshot_azure_ad.png["Microsoft Azure の Active Directory サービスを表示します。"]

. メニューで*アプリ登録*を選択します。
. *新規登録*を選択します。
. アプリケーションの詳細を指定します。
+
** *名前*: アプリケーションの名前を入力します。
** *アカウント タイプ*: アカウント タイプを選択します (いずれのタイプでもNetAppコンソールで使用できます)。
** *リダイレクト URI*: このフィールドは空白のままにすることができます。


. *登録*を選択します。
+
AD アプリケーションとサービス プリンシパルを作成しました。



.アプリケーションをロールに割り当てる
. カスタム ロールを作成します。
+
Azure ポータル、Azure PowerShell、Azure CLI、または REST API を使用して、Azure カスタム ロールを作成できます。次の手順は、Azure CLI を使用してロールを作成する方法を示しています。別の方法をご希望の場合は、 https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles#steps-to-create-a-custom-role["Azureドキュメント"^]

+
.. の内容をコピーしますlink:reference-permissions-azure.html["コンソールエージェントのカスタムロール権限"]JSON ファイルに保存します。
.. 割り当て可能なスコープに Azure サブスクリプション ID を追加して、JSON ファイルを変更します。
+
ユーザーがCloud Volumes ONTAPシステムを作成する各 Azure サブスクリプションの ID を追加する必要があります。

+
*例*

+
[source, json]
----
"AssignableScopes": [
"/subscriptions/d333af45-0d07-4154-943d-c25fbzzzzzzz",
"/subscriptions/54b91999-b3e6-4599-908e-416e0zzzzzzz",
"/subscriptions/398e471c-3b42-4ae7-9b59-ce5bbzzzzzzz"
----
.. JSON ファイルを使用して、Azure でカスタム ロールを作成します。
+
次の手順では、Azure Cloud Shell で Bash を使用してロールを作成する方法について説明します。

+
*** 始める https://docs.microsoft.com/en-us/azure/cloud-shell/overview["Azure クラウド シェル"^]Bash 環境を選択します。
*** JSON ファイルをアップロードします。
+
image:screenshot_azure_shell_upload.png["ファイルをアップロードするオプションを選択できる Azure Cloud Shell のスクリーンショット。"]

*** Azure CLI を使用してカスタム ロールを作成します。
+
[source, azurecli]
----
az role definition create --role-definition Connector_Policy.json
----
+
これで、コンソール エージェント仮想マシンに割り当てることができる、コンソール オペレーターと呼ばれるカスタム ロールが作成されます。





. アプリケーションをロールに割り当てます。
+
.. Azure ポータルから、*サブスクリプション* サービスを開きます。
.. サブスクリプションを選択します。
.. *アクセス制御 (IAM) > 追加 > ロール割り当ての追加* を選択します。
.. *役割*タブで、*コンソールオペレーター*役割を選択し、*次へ*を選択します。
.. *メンバー*タブで、次の手順を実行します。
+
*** *ユーザー、グループ、またはサービス プリンシパル*を選択したままにします。
*** *メンバーを選択*を選択します。
+
image:screenshot-azure-service-principal-role.png["アプリケーションにロールを追加するときにメンバー ページを表示する Azure ポータルのスクリーンショット。"]

*** アプリケーションの名前を検索します。
+
次に例を示します。

+
image:screenshot_azure_service_principal_role.png["Azure ポータルの「ロールの割り当ての追加」フォームが表示された Azure ポータルのスクリーンショット。"]

*** アプリケーションを選択し、[選択] を選択します。
*** *次へ*を選択します。


.. *レビュー + 割り当て*を選択します。
+
これで、サービス プリンシパルに、コンソール エージェントをデプロイするために必要な Azure アクセス許可が付与されました。

+
複数の Azure サブスクリプションからCloud Volumes ONTAPをデプロイする場合は、サービス プリンシパルを各サブスクリプションにバインドする必要があります。  NetAppコンソールでは、 Cloud Volumes ONTAP をデプロイするときに使用するサブスクリプションを選択できます。





.Windows Azure サービス管理 API 権限を追加する
. *Microsoft Entra ID* サービスで、*アプリの登録* を選択し、アプリケーションを選択します。
. *API 権限 > 権限の追加* を選択します。
. *Microsoft API* の下で、*Azure Service Management* を選択します。
+
image:screenshot_azure_service_mgmt_apis.gif["Azure サービス管理 API のアクセス許可を示す Azure ポータルのスクリーンショット。"]

. *組織ユーザーとして Azure サービス管理にアクセスする* を選択し、*権限の追加* を選択します。
+
image:screenshot_azure_service_mgmt_apis_add.gif["Azure サービス管理 API の追加を示す Azure ポータルのスクリーンショット。"]



.アプリケーションのアプリケーションIDとディレクトリIDを取得します
. *Microsoft Entra ID* サービスで、*アプリの登録* を選択し、アプリケーションを選択します。
. *アプリケーション (クライアント) ID* と *ディレクトリ (テナント) ID* をコピーします。
+
image:screenshot_azure_app_ids.gif["Microsoft Entra IDy 内のアプリケーションのアプリケーション (クライアント) ID とディレクトリ (テナント) ID を示すスクリーンショット。"]

+
Azure アカウントをコンソールに追加するときは、アプリケーションのアプリケーション (クライアント) ID とディレクトリ (テナント) ID を指定する必要があります。コンソールは ID を使用してプログラムでサインインします。



.クライアントシークレットを作成する
. *Microsoft Entra ID* サービスを開きます。
. *アプリ登録*を選択し、アプリケーションを選択します。
. *証明書とシークレット > 新しいクライアント シークレット*を選択します。
. シークレットの説明と期間を指定します。
. *追加*を選択します。
. クライアント シークレットの値をコピーします。
+
image:screenshot_azure_client_secret.gif["Microsoft Entra サービス プリンシパルのクライアント シークレットを表示する Azure ポータルのスクリーンショット。"]



--
====


== VCenter環境にコンソールエージェントをインストールする

NetApp は、VCenter 環境へのコンソール エージェントのインストールをサポートしています。 OVA ファイルには、VMware 環境に展開できる事前構成済みの VM イメージが含まれています。ファイルのダウンロードまたは URL の展開は、 NetAppコンソールから直接行えます。コンソール エージェント ソフトウェアと自己署名証明書が含まれています。



=== OVAをダウンロードするかURLをコピーしてください

OVA をダウンロードするか、 NetAppコンソールから OVA URL を直接コピーします。

. *管理 > エージェント*を選択します。
. *概要*ページで、*エージェントのデプロイ > オンプレミス*を選択します。
. *OVA付き*を選択してください。
. OVA をダウンロードするか、VCenter で使用する URL をコピーするかを選択します。




=== VCenterにエージェントを展開する

エージェントを展開するには、VCenter 環境にログインします。

.手順
. 環境で必要な場合は、自己署名証明書を信頼できる証明書にアップロードします。インストール後にこの証明書を置き換えます。link:task-installing-https-cert.html["自己署名証明書を置き換える方法を学びます。"]
. コンテンツ ライブラリまたはローカル システムから OVA を展開します。
+
|===


| ローカルシステムから | コンテンツライブラリから 


| a. 右クリックして、[OVF テンプレートのデプロイ...] を選択します。b. URL から OVA ファイルを選択するか、その場所を参照して、[次へ] を選択します。 | a. コンテンツライブラリに移動し、コンソールエージェントOVAを選択します。b. *アクション* > *このテンプレートから新しいVM*を選択します。 
|===
. OVF テンプレートのデプロイ ウィザードを完了して、コンソール エージェントをデプロイします。
. VM の名前とフォルダーを選択し、[次へ] を選択します。
. コンピューティング リソースを選択し、[次へ] を選択します。
. テンプレートの詳細を確認し、[次へ] を選択します。
. ライセンス契約に同意し、[次へ] を選択します。
. 使用するプロキシ構成のタイプ（明示的プロキシ、透過プロキシ、またはプロキシなし）を選択します。
. VM を展開するデータストアを選択し、[次へ] を選択します。ホストの要件を満たしていることを確認してください。
. VM を接続するネットワークを選択し、[次へ] を選択します。ネットワークが IPv4 であり、必要なエンドポイントへのアウトバウンド インターネット アクセスできることを確認します。
. *テンプレートのカスタマイズ*ウィンドウで、次のフィールドに入力します。
+
** *プロキシ情報*
+
*** 明示的なプロキシを選択した場合は、プロキシ サーバーのホスト名または IP アドレスとポート番号、およびユーザー名とパスワードを入力します。
*** 透過プロキシを選択した場合は、それぞれの証明書をアップロードします。


** *仮想マシンの構成*
+
*** *構成チェックをスキップ*: このチェックボックスはデフォルトでオフになっており、エージェントはネットワーク アクセスを検証するために構成チェックを実行します。
+
**** NetApp、インストールにエージェントの構成チェックが含まれるように、このボックスをオフのままにしておくことを推奨しています。構成チェックでは、エージェントが必要なエンドポイントへのネットワーク アクセス権を持っているかどうかを検証します。接続の問題によりデプロイメントが失敗した場合は、エージェント ホストから検証レポートとログにアクセスできます。場合によっては、エージェントがネットワークにアクセスできることが確実な場合は、チェックをスキップすることもできます。例えば、まだlink:reference-networking-saas-console-previous.html["以前のエンドポイント"]エージェントのアップグレードに使用すると、検証が失敗し、エラーが発生します。これを回避するには、検証チェックなしでインストールするためのチェックボックスをオンにします。link:reference-networking-saas-console-previous.html#update-endpoint-list["エンドポイントリストを更新する方法を学ぶ"] 。


*** *メンテナンスパスワード*: `maint`エージェントメンテナンスコンソールへのアクセスを許可するユーザー。
*** *NTP サーバー*: 時刻同期用の 1 つ以上の NTP サーバーを指定します。
*** *ホスト名*: この VM のホスト名を設定します。検索ドメインを含めることはできません。たとえば、console10.searchdomain.company.com の FQDN は console10 と入力する必要があります。
*** *プライマリ DNS*: 名前解決に使用するプライマリ DNS サーバーを指定します。
*** *セカンダリ DNS*: 名前解決に使用するセカンダリ DNS サーバーを指定します。
*** 検索ドメイン: ホスト名を解決するときに使用する検索ドメイン名を指定します。たとえば、FQDN が console10.searchdomain.company.com の場合は、searchdomain.company.com と入力します。
*** *IPv4 アドレス*: ホスト名にマッピングされる IP アドレス。
*** *IPv4 サブネット マスク*: IPv4 アドレスのサブネット マスク。
*** *IPv4 ゲートウェイ アドレス*: IPv4 アドレスのゲートウェイ アドレス。




. *次へ*を選択します。
. *完了準備完了*ウィンドウで詳細を確認し、*完了*を選択します。
+
vSphere タスク バーには、コンソール エージェントの展開の進行状況が表示されます。

. VMの電源をオンにします。



NOTE: デプロイメントが失敗した場合は、エージェント ホストから検証レポートとログにアクセスできます。link:task-troubleshoot-connector.html#troubleshoot-installation["インストールの問題をトラブルシューティングする方法を学びます。"]



== NetAppコンソールにコンソールエージェントを登録する

コンソールにログインし、コンソール エージェントを組織に関連付けます。ログイン方法は、コンソールを使用しているモードによって異なります。コンソールを標準モードで使用している場合は、SaaS Web サイトからログインします。コンソールを制限モードまたはプライベート モードで使用している場合は、コンソール エージェント ホストからローカルにログインします。

.手順
. Web ブラウザを開き、コンソール エージェント ホストの URL を入力します。
+
コンソール ホスト URL は、ホストの構成に応じて、ローカルホスト、プライベート IP アドレス、またはパブリック IP アドレスになります。たとえば、コンソール エージェントがパブリック IP アドレスのないパブリック クラウドにある場合は、コンソール エージェント ホストに接続しているホストのプライベート IP アドレスを入力する必要があります。

. サインアップまたはログインしてください。
. ログイン後、コンソールを設定します。
+
.. コンソール エージェントに関連付けるコンソール組織を指定します。
.. システムの名前を入力します。
.. *安全な環境で実行していますか?* の下で、制限モードを無効のままにします。
+
コンソール エージェントがオンプレミスにインストールされている場合、制限モードはサポートされません。

.. *始めましょう*を選択します。






== コンソールにクラウドプロバイダーの資格情報を追加する

コンソール エージェントをインストールしてセットアップしたら、コンソール エージェントが AWS または Azure でアクションを実行するために必要な権限を持つように、クラウド資格情報を追加します。

[role="tabbed-block"]
====
.AWS
--
.開始する前に
これらの AWS 認証情報を作成したばかりの場合は、使用可能になるまでに数分かかることがあります。資格情報をコンソールに追加する前に、数分お待ちください。

.手順
. *管理 > 資格情報*を選択します。
. *組織の資格情報*を選択します。
. *資格情報の追加*を選択し、ウィザードの手順に従います。
+
.. *資格情報の場所*: *Amazon Web Services > エージェントを選択します。
.. *資格情報の定義*: AWS アクセスキーとシークレットキーを入力します。
.. *マーケットプレイス サブスクリプション*: 今すぐサブスクライブするか、既存のサブスクリプションを選択して、マーケットプレイス サブスクリプションをこれらの資格情報に関連付けます。
.. *確認*: 新しい資格情報の詳細を確認し、[*追加*] を選択します。




これで、 https://console.netapp.com["NetAppコンソール"^]コンソール エージェントの使用を開始します。

--
.Azure
--
.開始する前に
これらの Azure 資格情報を作成したばかりの場合は、使用可能になるまでに数分かかることがあります。コンソール エージェントに資格情報を追加する前に、数分間お待ちください。

.手順
. *管理 > 資格情報*を選択します。
. *資格情報の追加*を選択し、ウィザードの手順に従います。
+
.. *資格情報の場所*: *Microsoft Azure > エージェント* を選択します。
.. *資格情報の定義*: 必要な権限を付与する Microsoft Entra サービス プリンシパルに関する情報を入力します。
+
*** アプリケーション（クライアント）ID
*** ディレクトリ（テナント）ID
*** クライアントシークレット


.. *マーケットプレイス サブスクリプション*: 今すぐサブスクライブするか、既存のサブスクリプションを選択して、マーケットプレイス サブスクリプションをこれらの資格情報に関連付けます。
.. *確認*: 新しい資格情報の詳細を確認し、[*追加*] を選択します。




.結果
これで、コンソール エージェントに、ユーザーに代わって Azure でアクションを実行するために必要なアクセス許可が付与されました。これで、 https://console.netapp.com["NetAppコンソール"^]コンソール エージェントの使用を開始します。

--
====